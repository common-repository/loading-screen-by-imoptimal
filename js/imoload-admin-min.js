jQuery(function($){var pageId=document.getElementById('imoload-options');var instructionsTitle=pageId.getElementsByClassName('imoload-instructions');var instructionsList=pageId.getElementsByTagName('ol');var collapsibleTrigger=pageId.getElementsByClassName('imoload-collapsible');var collapsibleElement=document.getElementById('imoload-loading').getElementsByClassName('form-table');var info=pageId.getElementsByClassName('imoload-info');var logoButtons=pageId.getElementsByClassName('imoload-logo-button');var logoImage=pageId.getElementsByClassName('imoload-preview-image');var $optionsMeta=imoloadPhp.imoload_numbers_field;var i;instructionsList[0].style.display="none";instructionsTitle[0].addEventListener("click",function(){this.classList.toggle("active");if(instructionsList[0].style.display==="none"){$('.imoload-instructions + ol').slideDown()}else{$('.imoload-instructions + ol').slideUp()}});if($optionsMeta==3){$('.imoload-collapsible.WholeWebsite').css('display','none')}
for(i=0;i<collapsibleTrigger.length;i++){collapsibleElement[i].style.display="none";if($(logoImage[i]).hasClass('default')){info[i].innerHTML=imoloadLogo.empty}else{info[i].innerHTML=imoloadLogo.selected}
collapsibleTrigger[i].addEventListener("click",function(){this.classList.toggle("active");var content=this.parentNode.nextElementSibling;var jqContent=$(content);if(content.style.display==="none"){jqContent.slideDown()}else{jqContent.slideUp()}});logoButtons[i].addEventListener("click",function(e){e.preventDefault();var hiddenInput=this.previousElementSibling;var logoImage=hiddenInput.previousElementSibling;jQinput=$(hiddenInput);jQimage=$(logoImage);var image_frame;image_frame=wp.media({title:'Select Media',multiple:!1,library:{type:'image',}});image_frame.on('close',function(){var selection=image_frame.state().get('selection');var gallery_ids=new Array();var my_index=0;selection.each(function(attachment){gallery_ids[my_index]=attachment.id;my_index++});var ids=gallery_ids.join(",");jQinput.val(ids);Refresh_Image(ids)});image_frame.on('open',function(){var selection=image_frame.state().get('selection');var ids=jQinput.val().split(',');ids.forEach(function(id){var attachment=wp.media.attachment(id);attachment.fetch();selection.add(attachment?[attachment]:[])})});image_frame.on('select',function(){var selection=image_frame.state().get('selection').first().toJSON();jQimage.attr('src',selection.url).css({'width':selection.width,'max-width':'300px','height':'auto','background-color':'transparent'})});if(image_frame){image_frame.open()}})}
function Refresh_Image(the_id){var data={action:'imoload_get_image',id:the_id};jQuery.get(ajaxurl,data,function(response){if(response.success===!0){jQimage.replaceWith(response.data.image)}})}
function save_imoload_ajax(button,notice,reload){$(button).submit(function(){var input=$(this).serialize();$.post('options.php',input).error(function(){$(notice).addClass('notice-error').html('<span>An error occured. Not saved!</span>').css('display','block');setTimeout(function(){$(notice).css('display','none')},2000)}).success(function(){if(reload==!0){window.location.reload(!0)}else if(reload==!1){}
$(notice).addClass('notice-success is-dismissible').html('<span>Saved succesfully!</span>').css('display','block');setTimeout(function(){$(notice).css('display','none')},2000)});return!1})}
save_imoload_ajax('#imoload-meta','.meta-notice',!0);save_imoload_ajax('#imoload-loading','.loading-notice',!1)})